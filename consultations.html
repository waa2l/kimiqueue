<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø¨Ø§Ø¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 'arabic': ['Cairo', 'sans-serif'] },
                    colors: {
                        'primary': '#1e40af',
                        'secondary': '#3b82f6',
                        'success': '#10b981',
                        'warning': '#f59e0b',
                        'danger': '#ef4444'
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Cairo', sans-serif; }
        .step-indicator { transition: all 0.3s ease; }
        .step-indicator.active { background: linear-gradient(135deg, #3b82f6, #1e40af); color: white; }
        .step-indicator.completed { background: linear-gradient(135deg, #10b981, #059669); color: white; }
        .form-section { display: none; }
        .form-section.active { display: block; }
        .medical-history-item { transition: all 0.2s ease; }
        .medical-history-item:hover { background-color: #f3f4f6; }
        .medical-history-item.selected { background: linear-gradient(135deg, #3b82f6, #1e40af); color: white; }
        
        .main-tab { cursor: pointer; border-bottom: 3px solid transparent; transition: all 0.3s; }
        .main-tab.active { border-color: #1e40af; color: #1e40af; font-weight: bold; }
    </style>
</head>
<body class="bg-gray-50 font-arabic">
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <h1 class="text-2xl font-bold text-primary">ğŸ¥ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ø¨Ø§Ø¨</h1>
                <div class="flex space-x-4 space-x-reverse">
                    <a href="index.html" class="text-gray-700 hover:text-primary px-3 py-2 rounded-md">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="bg-white shadow mb-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="py-6">
                <h1 class="text-3xl font-bold text-gray-900">Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ©</h1>
                <p class="mt-2 text-gray-600">Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ© Ø£Ùˆ ØªØ§Ø¨Ø¹ Ø­Ø§Ù„Ø© Ø§Ø³ØªØ´Ø§Ø±ØªÙƒ</p>
                
                <div class="flex mt-8 space-x-8 space-x-reverse border-b">
                    <div onclick="switchMainTab('new')" id="tab-new" class="main-tab active pb-3 px-4">
                        <i class="fas fa-plus-circle ml-2"></i>Ø§Ø³ØªØ´Ø§Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©
                    </div>
                    <div onclick="switchMainTab('followup')" id="tab-followup" class="main-tab pb-3 px-4 text-gray-500">
                        <i class="fas fa-search ml-2"></i>Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø±Ø¯
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
        
        <div id="new-consultation-container">
            <div id="registration-check" class="bg-white rounded-lg shadow-lg p-6 mb-8 text-center">
                <div class="text-primary text-6xl mb-4"><i class="fas fa-user-md"></i></div>
                <h2 class="text-2xl font-bold mb-4">Ø·Ù„Ø¨ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ©</h2>
                <p class="text-gray-600 mb-6">Ù‚Ù… Ø¨ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ø¨ÙŠ ÙˆØ³ÙŠØªÙ… Ø§Ù„Ø±Ø¯ Ø¹Ù„ÙŠÙƒ Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø®ØªØµ</p>
                <button onclick="showRegistrationForm()" class="bg-primary text-white px-8 py-3 rounded-lg hover:bg-secondary font-semibold">
                    <i class="fas fa-edit ml-2"></i>Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
                </button>
            </div>

            <div id="registration-form" class="hidden">
                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <div class="flex justify-center mb-8">
                        <div class="flex space-x-4 space-x-reverse">
                            <div class="step-indicator active w-10 h-10 rounded-full flex items-center justify-center font-semibold" id="step-1">1</div>
                            <div class="step-indicator w-10 h-10 rounded-full flex items-center justify-center font-semibold bg-gray-200" id="step-2">2</div>
                            <div class="step-indicator w-10 h-10 rounded-full flex items-center justify-center font-semibold bg-gray-200" id="step-3">3</div>
                        </div>
                    </div>

                    <div class="form-section active" id="section-1">
                        <h3 class="text-xl font-semibold mb-6">Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ *</label>
                                <input type="text" id="full-name" required class="w-full px-3 py-2 border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ *</label>
                                <input type="text" id="national-id" required class="w-full px-3 py-2 border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ *</label>
                                <input type="tel" id="phone-number" required class="w-full px-3 py-2 border rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ù†ÙˆØ¹ *</label>
                                <select id="gender" required class="w-full px-3 py-2 border rounded-lg">
                                    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù†ÙˆØ¹</option>
                                    <option value="male">Ø°ÙƒØ±</option>
                                    <option value="female">Ø£Ù†Ø«Ù‰</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-8 text-center">
                            <button onclick="nextStep(2)" class="bg-primary text-white px-8 py-3 rounded-lg">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                        </div>
                    </div>

                    <div class="form-section" id="section-2">
                        <h3 class="text-xl font-semibold mb-6">Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø±Ø¶ÙŠ</h3>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù…Ø²Ù…Ù†Ø©</label>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                                <div class="medical-history-item p-3 border rounded-lg cursor-pointer text-center" data-disease="diabetes"><div class="text-sm">Ø³ÙƒØ±</div></div>
                                <div class="medical-history-item p-3 border rounded-lg cursor-pointer text-center" data-disease="pressure"><div class="text-sm">Ø¶ØºØ·</div></div>
                                <div class="medical-history-item p-3 border rounded-lg cursor-pointer text-center" data-disease="heart"><div class="text-sm">Ù‚Ù„Ø¨</div></div>
                            </div>
                        </div>
                        <div class="flex justify-between mt-8">
                            <button onclick="previousStep(1)" class="bg-gray-500 text-white px-8 py-3 rounded-lg">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                            <button onclick="nextStep(3)" class="bg-primary text-white px-8 py-3 rounded-lg">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                        </div>
                    </div>

                    <div class="form-section" id="section-3">
                        <h3 class="text-xl font-semibold mb-6">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©</h3>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ *</label>
                            <select id="specialty" required class="w-full px-3 py-2 border rounded-lg">
                                <option value="">Ø§Ø®ØªØ± Ø§Ù„ØªØ®ØµØµ</option>
                                <option value="Ø·Ø¨ Ø§Ù„Ø£Ø³Ø±Ø©">Ø·Ø¨ Ø§Ù„Ø£Ø³Ø±Ø©</option>
                                <option value="Ø§Ù„Ø¨Ø§Ø·Ù†ÙŠØ©">Ø§Ù„Ø¨Ø§Ø·Ù†ÙŠØ©</option>
                                <option value="Ø§Ù„Ø£Ø·ÙØ§Ù„">Ø§Ù„Ø£Ø·ÙØ§Ù„</option>
                                <option value="Ø§Ù„Ù†Ø³Ø§Ø¡">Ø§Ù„Ù†Ø³Ø§Ø¡</option>
                                <option value="Ø§Ù„Ø£Ø³Ù†Ø§Ù†">Ø§Ù„Ø£Ø³Ù†Ø§Ù†</option>
                                <option value="Ø§Ù„Ø¬Ù„Ø¯ÙŠØ©">Ø§Ù„Ø¬Ù„Ø¯ÙŠØ©</option>
                            </select>
                        </div>
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ø§Ù„Ø´ÙƒÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© *</label>
                            <textarea id="complaint" required rows="4" class="w-full px-3 py-2 border rounded-lg"></textarea>
                        </div>
                        <div class="flex justify-between mt-8">
                            <button onclick="previousStep(2)" class="bg-gray-500 text-white px-8 py-3 rounded-lg">Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
                            <button onclick="submitRegistration()" class="bg-success text-white px-8 py-3 rounded-lg">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="success-message" class="hidden bg-white rounded-lg shadow-lg p-8 text-center">
                <div class="text-success text-6xl mb-4"><i class="fas fa-check-circle"></i></div>
                <h2 class="text-2xl font-bold mb-4">ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­!</h2>
                <p class="text-gray-600 mb-6">ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ø±Ù‚Ù… Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø±Ø¯</p>
                <div class="bg-blue-50 p-6 rounded-lg mb-6 border border-blue-100 max-w-md mx-auto">
                    <div class="text-sm text-gray-600 mb-2">Ø±Ù‚Ù… Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©</div>
                    <div class="text-3xl font-bold text-primary tracking-wider" id="consultation-number"></div>
                </div>
                <button onclick="location.reload()" class="bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200">Ø¹ÙˆØ¯Ø©</button>
            </div>
        </div>

        <div id="followup-container" class="hidden">
            <div class="max-w-2xl mx-auto">
                <div class="bg-white rounded-lg shadow-lg p-8 mb-6">
                    <h3 class="text-xl font-bold mb-4 text-center">Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©</h3>
                    <p class="text-gray-600 text-center mb-6">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø°ÙŠ Ø­ØµÙ„Øª Ø¹Ù„ÙŠÙ‡ Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</p>
                    
                    <div class="flex space-x-3 space-x-reverse">
                        <input type="text" id="search-consultation-input" placeholder="Ù…Ø«Ø§Ù„: CON171000..." class="flex-1 px-4 py-3 border border-gray-300 rounded-lg text-lg focus:border-primary focus:outline-none">
                        <button onclick="searchConsultation()" class="bg-primary text-white px-6 py-3 rounded-lg hover:bg-secondary font-semibold">
                            <i class="fas fa-search ml-2"></i>Ø¨Ø­Ø«
                        </button>
                    </div>
                </div>

                <div id="consultation-result" class="hidden bg-white rounded-lg shadow-lg overflow-hidden">
                    <div class="bg-gray-50 px-6 py-4 border-b flex justify-between items-center">
                        <span class="font-bold text-gray-700">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©</span>
                        <span id="result-status-badge" class="px-3 py-1 rounded-full text-sm font-medium"></span>
                    </div>
                    
                    <div class="p-6">
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div>
                                <div class="text-xs text-gray-500">Ø§Ù„Ù…Ø±ÙŠØ¶</div>
                                <div class="font-semibold" id="result-patient"></div>
                            </div>
                            <div>
                                <div class="text-xs text-gray-500">Ø§Ù„ØªØ®ØµØµ</div>
                                <div class="font-semibold" id="result-specialty"></div>
                            </div>
                            <div class="col-span-2">
                                <div class="text-xs text-gray-500">Ø§Ù„Ø´ÙƒÙˆÙ‰</div>
                                <p class="text-gray-800 bg-gray-50 p-3 rounded mt-1" id="result-complaint"></p>
                            </div>
                        </div>

                        <div id="response-section" class="border-t pt-6 hidden">
                            <div class="flex items-center mb-4">
                                <div class="w-10 h-10 rounded-full bg-green-100 text-green-600 flex items-center justify-center ml-3">
                                    <i class="fas fa-user-md"></i>
                                </div>
                                <div>
                                    <div class="font-bold text-gray-800" id="result-doctor-name"></div>
                                    <div class="text-xs text-gray-500">Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬</div>
                                </div>
                            </div>
                            <div class="bg-green-50 border border-green-100 rounded-lg p-4">
                                <h4 class="font-semibold text-green-800 mb-2">Ø§Ù„Ø±Ø¯ Ø§Ù„Ø·Ø¨ÙŠ:</h4>
                                <p class="text-gray-700 whitespace-pre-line" id="result-response"></p>
                            </div>
                        </div>

                        <div id="pending-section" class="text-center py-6 hidden">
                            <i class="fas fa-clock text-4xl text-warning mb-3"></i>
                            <h3 class="text-lg font-bold text-gray-700">Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</h3>
                            <p class="text-gray-500">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø±Ø¯ Ù…Ù† Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø¨Ø¹Ø¯ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script src="supabaseClient.js"></script>
    <script>
        let currentStep = 1;
        let selectedDiseases = [];

        function checkSupabaseReady() {
            return new Promise((resolve) => {
                if (window.supabaseHelpers) resolve();
                else setTimeout(() => checkSupabaseReady().then(resolve), 100);
            });
        }

        // --- Navigation Logic ---
        function switchMainTab(tab) {
            document.querySelectorAll('.main-tab').forEach(el => {
                el.classList.remove('active', 'text-gray-500');
                el.classList.add('text-gray-500');
            });
            document.getElementById(`tab-${tab}`).classList.add('active');
            document.getElementById(`tab-${tab}`).classList.remove('text-gray-500');

            if (tab === 'new') {
                document.getElementById('new-consultation-container').classList.remove('hidden');
                document.getElementById('followup-container').classList.add('hidden');
            } else {
                document.getElementById('new-consultation-container').classList.add('hidden');
                document.getElementById('followup-container').classList.remove('hidden');
            }
        }

        // --- Registration Logic ---
        function showRegistrationForm() {
            document.getElementById('registration-check').classList.add('hidden');
            document.getElementById('registration-form').classList.remove('hidden');
        }

        function nextStep(step) {
            if(validateCurrentStep()) {
                document.getElementById(`section-${currentStep}`).classList.remove('active');
                document.getElementById(`step-${currentStep}`).classList.remove('active');
                document.getElementById(`step-${currentStep}`).classList.add('completed');
                currentStep = step;
                document.getElementById(`section-${currentStep}`).classList.add('active');
                document.getElementById(`step-${currentStep}`).classList.add('active');
            }
        }

        function previousStep(step) {
            document.getElementById(`section-${currentStep}`).classList.remove('active');
            document.getElementById(`step-${currentStep}`).classList.remove('active');
            currentStep = step;
            document.getElementById(`section-${currentStep}`).classList.add('active');
            document.getElementById(`step-${currentStep}`).classList.remove('completed');
            document.getElementById(`step-${currentStep}`).classList.add('active');
        }

        function validateCurrentStep() {
            // Simplified validation for brevity
            if (currentStep === 1) {
                if (!document.getElementById('full-name').value || !document.getElementById('phone-number').value) {
                    alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ©');
                    return false;
                }
            } else if (currentStep === 3) {
                if (!document.getElementById('specialty').value || !document.getElementById('complaint').value) {
                    alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ®ØµØµ ÙˆÙƒØªØ§Ø¨Ø© Ø§Ù„Ø´ÙƒÙˆÙ‰');
                    return false;
                }
            }
            return true;
        }

        // Toggle diseases selection
        document.querySelectorAll('.medical-history-item').forEach(item => {
            item.addEventListener('click', function() {
                const disease = this.dataset.disease;
                if (this.classList.contains('selected')) {
                    this.classList.remove('selected');
                    selectedDiseases = selectedDiseases.filter(d => d !== disease);
                } else {
                    this.classList.add('selected');
                    selectedDiseases.push(disease);
                }
            });
        });

        async function submitRegistration() {
            if (!validateCurrentStep()) return;
            await checkSupabaseReady();
            
            const consultationData = {
                patient_name: document.getElementById('full-name').value,
                national_id: document.getElementById('national-id').value,
                phone: document.getElementById('phone-number').value,
                gender: document.getElementById('gender').value,
                chronic_diseases: selectedDiseases,
                specialty: document.getElementById('specialty').value,
                complaint: document.getElementById('complaint').value,
                consultation_number: `CON${Math.floor(Math.random() * 100000) + 100000}`, // Simple random ID
                status: 'pending'
            };
            
            const result = await window.supabaseHelpers.addConsultation(consultationData);
            
            if (result) {
                document.getElementById('consultation-number').textContent = consultationData.consultation_number;
                document.getElementById('registration-form').classList.add('hidden');
                document.getElementById('success-message').classList.remove('hidden');
            } else {
                alert('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„');
            }
        }

        // --- Follow Up Logic (New) ---
        async function searchConsultation() {
            const input = document.getElementById('search-consultation-input');
            const consultationNumber = input.value.trim();
            
            if (!consultationNumber) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©');
                return;
            }

            // UI Loading state
            input.disabled = true;
            document.body.style.cursor = 'wait';

            await checkSupabaseReady();
            
            // Note: This function needs to be added to supabaseClient.js as discussed
            const result = await window.supabaseHelpers.getConsultationByNumber(consultationNumber);
            
            input.disabled = false;
            document.body.style.cursor = 'default';

            if (!result) {
                alert('Ø±Ù‚Ù… Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
                document.getElementById('consultation-result').classList.add('hidden');
                return;
            }

            // Fill Data
            document.getElementById('consultation-result').classList.remove('hidden');
            document.getElementById('result-patient').textContent = result.patient_name;
            document.getElementById('result-specialty').textContent = result.specialty;
            document.getElementById('result-complaint').textContent = result.complaint;
            
            const statusBadge = document.getElementById('result-status-badge');
            const pendingSection = document.getElementById('pending-section');
            const responseSection = document.getElementById('response-section');

            if (result.status === 'completed') {
                statusBadge.textContent = 'ØªÙ… Ø§Ù„Ø±Ø¯';
                statusBadge.className = 'px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800';
                
                pendingSection.classList.add('hidden');
                responseSection.classList.remove('hidden');
                
                document.getElementById('result-doctor-name').textContent = result.doctors?.name || 'Ø·Ø¨ÙŠØ¨ Ø§Ù„Ù…Ø±ÙƒØ²';
                document.getElementById('result-response').textContent = result.doctor_response;
            } else {
                statusBadge.textContent = 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±';
                statusBadge.className = 'px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800';
                
                pendingSection.classList.remove('hidden');
                responseSection.classList.add('hidden');
            }
        }
    </script>
</body>
</html>
